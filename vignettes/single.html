<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>Single Site</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">Single Site</h1>



<p>Load the depression data into R.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">file &lt;-<span class="st"> &quot;https://github.com/celehs/KESER/raw/master/rdata/depression.rds&quot;</span></a>
<a class="sourceLine" id="cb1-2" data-line-number="2">data &lt;-<span class="st"> </span><span class="kw">readRDS</span>(<span class="kw">url</span>(file, <span class="st">&quot;rb&quot;</span>))</a></code></pre></div>
<div id="feature-selection-with-embeddings-from-partners-healthcare" class="section level2">
<h2>Feature Selection with Embeddings from Partners Healthcare</h2>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw">library</span>(KESER)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw">system.time</span>(loc.fit.RPDR &lt;-<span class="st"> </span><span class="kw">loc.feature.selection</span>(</a>
<a class="sourceLine" id="cb2-3" data-line-number="3">  data<span class="op">$</span>X_full_lst[[<span class="dv">1</span>]], data<span class="op">$</span>Y_full_lst[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb2-4" data-line-number="4">  data<span class="op">$</span>X_train_lst[[<span class="dv">1</span>]], data<span class="op">$</span>Y_train_lst[[<span class="dv">1</span>]], </a>
<a class="sourceLine" id="cb2-5" data-line-number="5">  data<span class="op">$</span>X_valid_lst[[<span class="dv">1</span>]], data<span class="op">$</span>Y_valid_lst[[<span class="dv">1</span>]],</a>
<a class="sourceLine" id="cb2-6" data-line-number="6">  <span class="dt">alpha =</span> <span class="dv">1</span>, <span class="dt">lambda_lst =</span> <span class="ot">NULL</span>, <span class="dt">up_rate =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb2-7" data-line-number="7">  <span class="dt">drop_rate =</span> <span class="fl">0.5</span>, <span class="dt">cos_cut =</span> <span class="fl">0.1</span>, <span class="dt">add.ridge =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>##    user  system elapsed 
## 111.099  13.219 103.870</code></pre>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1">loc.fit.RPDR</a></code></pre></div>
<pre><code>## $min.lambda
## [1] 2.439576e-05
## 
## $min.beta
##                fit.local$min.coef
## CCS:130              3.823896e-03
## CCS:182              6.911825e-03
## CCS:200              2.340667e-02
## CCS:218              1.484851e-01
## CCS:219              0.000000e+00
## CCS:227              4.883511e-03
## CCS:228              3.082936e-02
## CCS:232              0.000000e+00
## CCS:235              1.082787e-02
## CCS:237              2.642828e-02
## LOINC:10976-9        2.766678e-02
## LOINC:10992-6        7.870639e-03
## LOINC:10998-3        1.252211e-02
## LOINC:11004-9        0.000000e+00
## LOINC:12342-2        7.090658e-03
## LOINC:12375-2        1.537602e-02
## LOINC:12377-8        1.668985e-02
## LOINC:13453-6        0.000000e+00
## LOINC:13557-4        1.202773e-02
## LOINC:13569-9        1.285534e-02
## LOINC:13572-3        1.079808e-03
## LOINC:13577-2        1.593751e-02
## LOINC:13579-8        7.700179e-03
## LOINC:13588-9        1.944474e-02
## LOINC:13622-6        0.000000e+00
## LOINC:14313-1        0.000000e+00
## LOINC:14314-9        0.000000e+00
## LOINC:14316-4        0.000000e+00
## LOINC:14334-7        0.000000e+00
## LOINC:14336-2        0.000000e+00
## LOINC:14624-1        1.095373e-02
## LOINC:16199-2        4.084346e-03
## LOINC:16254-5        1.812601e-03
## LOINC:16360-0        2.807287e-02
## LOINC:16369-1        5.653634e-03
## LOINC:17384-9        2.577631e-02
## LOINC:17738-6        0.000000e+00
## LOINC:17856-6        0.000000e+00
## LOINC:19289-9        1.804405e-02
## LOINC:19550-3        0.000000e+00
## LOINC:19642-8        1.957558e-02
## LOINC:2086-7         0.000000e+00
## LOINC:2090-9         0.000000e+00
## LOINC:2093-3         0.000000e+00
## LOINC:2106-3         8.639388e-03
## LOINC:2161-8         0.000000e+00
## LOINC:2571-8         0.000000e+00
## LOINC:28059-4        0.000000e+00
## LOINC:2963-7         1.768680e-03
## LOINC:3016-3         2.091677e-02
## LOINC:3298-7         0.000000e+00
## LOINC:33060-5        0.000000e+00
## LOINC:3312-6         0.000000e+00
## LOINC:3335-7         3.502978e-02
## LOINC:3389-4         0.000000e+00
## LOINC:3413-2         3.690374e-02
## LOINC:3414-0         0.000000e+00
## LOINC:3491-8         6.818886e-02
## LOINC:3494-2         0.000000e+00
## LOINC:3505-5         1.066515e-02
## LOINC:3531-1         6.918860e-02
## LOINC:3536-0         6.914416e-02
## LOINC:35467-0        1.747518e-02
## LOINC:3548-5         4.332914e-03
## LOINC:35597-4        0.000000e+00
## LOINC:35608-9        0.000000e+00
## LOINC:35610-5        3.837678e-03
## LOINC:35614-7        1.368640e-02
## LOINC:35616-2        0.000000e+00
## LOINC:35624-6        3.817243e-03
## LOINC:35627-9        1.123029e-02
## LOINC:35629-5        2.412081e-02
## LOINC:35635-2        1.058937e-02
## LOINC:3679-8         0.000000e+00
## LOINC:3682-2         0.000000e+00
## LOINC:3690-5         0.000000e+00
## LOINC:3778-8         0.000000e+00
## LOINC:3826-5         8.893079e-07
## LOINC:4073-3         0.000000e+00
## LOINC:55349-5        3.699979e-02
## LOINC:57300-6        0.000000e+00
## LOINC:57301-4        0.000000e+00
## LOINC:57304-8        0.000000e+00
## LOINC:59593-4        0.000000e+00
## LOINC:72377-5        0.000000e+00
## LOINC:72378-3        0.000000e+00
## LOINC:72380-9        0.000000e+00
## LOINC:72381-7        0.000000e+00
## LOINC:72385-8        1.234325e-02
## LOINC:72388-2        3.747588e-02
## LOINC:72610-9        0.000000e+00
## LOINC:72733-9        0.000000e+00
## LOINC:72735-4        0.000000e+00
## LOINC:72737-0        1.163890e-03
## LOINC:72746-1        0.000000e+00
## LOINC:72750-3        0.000000e+00
## LOINC:72752-9        0.000000e+00
## LOINC:72753-7        0.000000e+00
## LOINC:72755-2        0.000000e+00
## LOINC:72758-6        4.596411e-15
## LOINC:72762-8        1.296610e-15
## LOINC:72766-9        0.000000e+00
## LOINC:9627-1         4.887374e-02
## LOINC:9830-1         2.555253e-02
## LOINC:X7003-7        8.442342e-03
## LOINC:X7004-5        0.000000e+00
## LOINC:X7005-2        1.833868e-02
## LOINC:X7006-0        0.000000e+00
## LOINC:X7008-6        0.000000e+00
## LOINC:X7011-0        1.758947e-02
## LOINC:X7013-6        0.000000e+00
## PheCode:070.3        0.000000e+00
## PheCode:216.1        1.654346e-03
## PheCode:244.4        0.000000e+00
## PheCode:260.7        3.329770e-02
## PheCode:261.2        4.287891e-03
## PheCode:261.4        1.738090e-03
## PheCode:272.1        2.432476e-02
## PheCode:278.1        3.392594e-02
## PheCode:278.4        0.000000e+00
## PheCode:290.1        0.000000e+00
## PheCode:290.3        3.878053e-03
## PheCode:291.1        4.175528e-03
## PheCode:291.4        5.281104e-03
## PheCode:292.2        1.366360e-02
## PheCode:292.3        0.000000e+00
## PheCode:292.6        0.000000e+00
## PheCode:295.1        6.336401e-03
## PheCode:295.2        0.000000e+00
## PheCode:295.3        2.915894e-03
## PheCode:296.1        2.232675e-02
## PheCode:297.1        4.135411e-02
## PheCode:297.2        2.738544e-02
## PheCode:300.1        9.309485e-02
## PheCode:300.3        1.836991e-02
## PheCode:300.4        5.226842e-03
## PheCode:300.8        2.595322e-03
## PheCode:300.9        3.762621e-02
## PheCode:301.1        3.452576e-02
## PheCode:301.2        1.157698e-02
## PheCode:302.1        1.329554e-02
## PheCode:303.1        2.610876e-02
## PheCode:303.3        2.488175e-02
## PheCode:303.4        8.036479e-03
## PheCode:304          0.000000e+00
## PheCode:305.2        2.579188e-02
## PheCode:306.1        1.339628e-02
## PheCode:312.3        2.509126e-02
## PheCode:313.1        9.409503e-03
## PheCode:313.2        2.683321e-03
## PheCode:313.3        0.000000e+00
## PheCode:315.1        1.994496e-02
## PheCode:315.2        0.000000e+00
## PheCode:317.1        2.063247e-02
## PheCode:318          2.216114e-03
## PheCode:327.1        6.761157e-03
## PheCode:327.3        0.000000e+00
## PheCode:327.4        9.969770e-04
## PheCode:327.5        2.500906e-02
## PheCode:327.6        1.846737e-02
## PheCode:327.7        0.000000e+00
## PheCode:333.3        2.108386e-02
## PheCode:338.2        2.609606e-02
## PheCode:339          0.000000e+00
## PheCode:347          3.379812e-02
## PheCode:355.1        6.964501e-03
## PheCode:386.9        0.000000e+00
## PheCode:401.1        1.402504e-02
## PheCode:530.1        4.451505e-02
## PheCode:564.1        1.068036e-03
## PheCode:599.4        1.671132e-02
## PheCode:612.1        2.845009e-02
## PheCode:614.5        1.633249e-02
## PheCode:626.1        1.321930e-03
## PheCode:626.4        2.447742e-02
## PheCode:706.1        1.902475e-02
## PheCode:726.1        2.534419e-02
## PheCode:729.1        6.673794e-03
## PheCode:740.3        0.000000e+00
## PheCode:745          4.326939e-02
## PheCode:760          1.450645e-02
## PheCode:761          0.000000e+00
## PheCode:764          3.133570e-04
## PheCode:770          0.000000e+00
## PheCode:941          8.180045e-03
## PheCode:965.3        5.062728e-02
## PheCode:966          1.256290e-02
## PheCode:969          1.373096e-02
## PheCode:971          0.000000e+00
## PheCode:972.6        2.487149e-02
## PheCode:981          0.000000e+00
## PheCode:989          3.337693e-02
## RXNORM:10154         0.000000e+00
## RXNORM:1040028       2.468195e-02
## RXNORM:10454         0.000000e+00
## RXNORM:10502         0.000000e+00
## RXNORM:10582         2.320423e-02
## RXNORM:10689         0.000000e+00
## RXNORM:106928        1.231112e-02
## RXNORM:10734         5.150661e-02
## RXNORM:10737         1.539217e-02
## RXNORM:10759         1.415415e-03
## RXNORM:10800         0.000000e+00
## RXNORM:10814         4.373760e-03
## RXNORM:1086769       3.550253e-02
## RXNORM:11118         0.000000e+00
## RXNORM:115698        1.030144e-02
## RXNORM:1307404       1.190179e-02
## RXNORM:141366        3.379892e-02
## RXNORM:1424          1.668723e-02
## RXNORM:1455099       7.494271e-02
## RXNORM:14584         1.011573e-02
## RXNORM:15996         8.880004e-04
## RXNORM:1819          0.000000e+00
## RXNORM:1827          1.621369e-03
## RXNORM:187832        0.000000e+00
## RXNORM:214130        0.000000e+00
## RXNORM:214153        6.570675e-03
## RXNORM:214558        0.000000e+00
## RXNORM:214559        0.000000e+00
## RXNORM:215830        4.781778e-03
## RXNORM:21949         0.000000e+00
## RXNORM:2353          0.000000e+00
## RXNORM:2356          3.035434e-03
## RXNORM:236782        0.000000e+00
## RXNORM:2418          1.423762e-02
## RXNORM:253146        0.000000e+00
## RXNORM:25480         2.209932e-02
## RXNORM:2556          0.000000e+00
## RXNORM:2597          3.331111e-02
## RXNORM:2598          3.012996e-02
## RXNORM:2599          0.000000e+00
## RXNORM:2626          0.000000e+00
## RXNORM:28439         4.269545e-03
## RXNORM:29046         0.000000e+00
## RXNORM:30125         5.132795e-04
## RXNORM:31565         3.122015e-02
## RXNORM:31765         0.000000e+00
## RXNORM:321988        1.044379e-03
## RXNORM:3247          1.870455e-02
## RXNORM:32624         0.000000e+00
## RXNORM:3288          2.560126e-02
## RXNORM:32937         0.000000e+00
## RXNORM:352364        9.670926e-05
## RXNORM:352372        1.224711e-02
## RXNORM:352377        1.311679e-02
## RXNORM:3554          2.019476e-02
## RXNORM:35636         0.000000e+00
## RXNORM:36108         8.477016e-03
## RXNORM:3638          0.000000e+00
## RXNORM:36437         4.859825e-03
## RXNORM:37418         0.000000e+00
## RXNORM:38400         3.229189e-03
## RXNORM:38404         1.455977e-02
## RXNORM:384410        0.000000e+00
## RXNORM:392556        2.511324e-02
## RXNORM:39786         9.411041e-03
## RXNORM:39993         0.000000e+00
## RXNORM:40114         0.000000e+00
## RXNORM:4018          0.000000e+00
## RXNORM:407884        2.653773e-02
## RXNORM:41126         0.000000e+00
## RXNORM:4141          0.000000e+00
## RXNORM:42347         3.063562e-02
## RXNORM:42355         1.126872e-03
## RXNORM:4257          3.290783e-02
## RXNORM:435           6.550840e-03
## RXNORM:4493          1.225916e-02
## RXNORM:461016        4.224847e-03
## RXNORM:46241         8.045266e-03
## RXNORM:4637          2.874390e-02
## RXNORM:466584        5.614966e-04
## RXNORM:51272         3.905702e-03
## RXNORM:5553          0.000000e+00
## RXNORM:5640          1.677081e-02
## RXNORM:5691          7.098736e-03
## RXNORM:57258         0.000000e+00
## RXNORM:588250        4.942715e-02
## RXNORM:596           0.000000e+00
## RXNORM:61381         0.000000e+00
## RXNORM:641465        2.395574e-02
## RXNORM:6448          0.000000e+00
## RXNORM:6470          2.391727e-02
## RXNORM:6475          2.766497e-02
## RXNORM:6711          0.000000e+00
## RXNORM:6719          0.000000e+00
## RXNORM:679314        0.000000e+00
## RXNORM:6847          4.660781e-02
## RXNORM:689842        1.020762e-02
## RXNORM:6901          5.864405e-03
## RXNORM:700810        9.588940e-03
## RXNORM:704           0.000000e+00
## RXNORM:7243          1.691643e-02
## RXNORM:725           0.000000e+00
## RXNORM:7258          0.000000e+00
## RXNORM:72625         3.666659e-03
## RXNORM:734064        2.506354e-02
## RXNORM:7407          0.000000e+00
## RXNORM:74667         1.063420e-02
## RXNORM:7531          0.000000e+00
## RXNORM:7646          0.000000e+00
## RXNORM:7716          1.183483e-02
## RXNORM:784649        1.839577e-02
## RXNORM:8076          0.000000e+00
## RXNORM:8124          2.229296e-02
## RXNORM:82819         1.094539e-02
## RXNORM:840781        1.494405e-02
## RXNORM:8629          0.000000e+00
## RXNORM:8787          0.000000e+00
## RXNORM:89013         0.000000e+00
## RXNORM:89905         0.000000e+00
## RXNORM:9639          4.741579e-02</code></pre>
</div>
<div id="feature-selection-with-embeddings-from-veteran-affairs-va" class="section level2">
<h2>Feature Selection with Embeddings from Veteran Affairs (VA)</h2>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw">library</span>(KESER)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="kw">system.time</span>(loc.fit.VA &lt;-<span class="st"> </span><span class="kw">loc.feature.selection</span>(</a>
<a class="sourceLine" id="cb6-3" data-line-number="3">  data<span class="op">$</span>X_full_lst[[<span class="dv">2</span>]], data<span class="op">$</span>Y_full_lst[[<span class="dv">2</span>]],</a>
<a class="sourceLine" id="cb6-4" data-line-number="4">  data<span class="op">$</span>X_train_lst[[<span class="dv">2</span>]], data<span class="op">$</span>Y_train_lst[[<span class="dv">2</span>]], </a>
<a class="sourceLine" id="cb6-5" data-line-number="5">  data<span class="op">$</span>X_valid_lst[[<span class="dv">2</span>]], data<span class="op">$</span>Y_valid_lst[[<span class="dv">2</span>]],</a>
<a class="sourceLine" id="cb6-6" data-line-number="6">  <span class="dt">alpha =</span> <span class="dv">1</span>, <span class="dt">lambda_lst =</span> <span class="ot">NULL</span>, <span class="dt">up_rate =</span> <span class="dv">10</span>, </a>
<a class="sourceLine" id="cb6-7" data-line-number="7">  <span class="dt">drop_rate =</span> <span class="fl">0.5</span>, <span class="dt">cos_cut =</span> <span class="fl">0.1</span>, <span class="dt">add.ridge =</span> <span class="ot">TRUE</span>))</a></code></pre></div>
<pre><code>##    user  system elapsed 
## 322.591  27.649 305.501</code></pre>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1">loc.fit.VA</a></code></pre></div>
<pre><code>## $min.lambda
## [1] 4.646981e-05
## 
## $min.beta
##                        fit.local$min.coef
## CCS:130                      0.0000000000
## CCS:131                      0.0000000000
## CCS:156                      0.0000000000
## CCS:163                      0.0000000000
## CCS:182                      0.0015194476
## CCS:198                      0.0000000000
## CCS:206                      0.0000000000
## CCS:213                      0.0000000000
## CCS:215                      0.0000000000
## CCS:218                      0.0947927314
## CCS:219                      0.0186810437
## CCS:220                      0.0000000000
## CCS:226                      0.0000000000
## CCS:227                      0.0000000000
## CCS:228                      0.0173356525
## CCS:233                      0.0000000000
## CCS:234                      0.0060330637
## CCS:235                      0.0000000000
## CCS:237                      0.0494283347
## LOINC:10998-3                0.0185465182
## LOINC:12382-8                0.0000000000
## LOINC:16201-6                0.0000000000
## LOINC:16228-9                0.0000000000
## LOINC:16249-5                0.0000000000
## LOINC:18282-4                0.0000000000
## LOINC:19080-1                0.0000000000
## LOINC:19141-1                0.0000000000
## LOINC:19312-8                0.0000000000
## LOINC:19328-4                0.0000000000
## LOINC:19388-8                0.0000000000
## LOINC:19483-7                0.0000000000
## LOINC:19659-2                0.0000000000
## LOINC:20507-0                0.0000000000
## LOINC:2106-3                 0.0139788383
## LOINC:2110-5                 0.0035587646
## LOINC:21441-1                0.0000000000
## LOINC:24111-7                0.0000000000
## LOINC:3016-3                 0.0000000000
## LOINC:30167-1                0.0000000000
## LOINC:3349-8                 0.0166428991
## LOINC:3390-2                 0.0349705556
## LOINC:3397-7                 0.0147682005
## LOINC:3414-0                 0.0018431400
## LOINC:3436-3                 0.0000000000
## LOINC:3507-1                 0.0000000000
## LOINC:3725-9                 0.0000000000
## LOINC:3773-9                 0.0050240723
## LOINC:3879-4                 0.0021743687
## LOINC:43304-5                0.0000000000
## LOINC:47000-5                0.0000000000
## LOINC:48345-3                0.0000000000
## LOINC:5643-2                 0.0000000000
## LOINC:5644-0                 0.0000000000
## LOINC:5645-7                 0.0170899095
## LOINC:56888-1                0.0000000000
## LOINC:58375-7                0.0000000000
## LOINC:58424-3                0.0000000000
## LOINC:60676-4                0.0000000000
## LOINC:6349-5                 0.0000000000
## LOINC:6410-5                 0.0000000000
## LOINC:6515-1                 0.0000000000
## LOINC:698-1                  0.0000000000
## LOINC:82306-2                0.0000000000
## Other lab:1000000049         0.0000000000
## Other lab:1000000388         0.0000000000
## Other lab:1000000417         0.0000000000
## Other lab:1000001688         0.0000000000
## Other lab:1000001695         0.0000000000
## Other lab:1000001744         0.0000000000
## Other lab:1000001992         0.0000000000
## Other lab:1000018437         0.0044449567
## Other lab:1000019158         0.0000000000
## Other lab:1000019243         0.0000000000
## Other lab:1000025222         0.0000000000
## Other lab:1000036461         0.0000000000
## Other lab:1000038032         0.0000000000
## Other lab:1000041034         0.0000000000
## Other lab:1000046222         0.0000000000
## Other lab:1000046538         0.0000000000
## Other lab:1000047671         0.0000000000
## Other lab:1000048582         0.0064232792
## Other lab:1000049900         0.0000000000
## Other lab:1000056092         0.0000000000
## Other lab:1000058214         0.0000000000
## Other lab:1000065473         0.0000000000
## Other lab:1000072482         0.0000000000
## Other lab:1000073068         0.0000000000
## Other lab:1000073438         0.0000000000
## Other lab:1000074737         0.0000000000
## Other lab:1000078272         0.0000000000
## Other lab:1000079548         0.0000000000
## Other lab:1000080207         0.0000000000
## Other lab:1000080999         0.0000000000
## Other lab:1000082178         0.0000000000
## Other lab:1000082797         0.0000000000
## Other lab:1000083088         0.0000000000
## Other lab:1000084062         0.0171108636
## Other lab:1000085773         0.0000000000
## Other lab:1000085866         0.0000000000
## Other lab:1000088563         0.0011951598
## Other lab:1000088684         0.0000000000
## Other lab:1000091075         0.0000000000
## Other lab:1000091818         0.0000000000
## Other lab:1000092853         0.0015389251
## Other lab:1000093146         0.0000000000
## Other lab:1000093307         0.0000000000
## Other lab:1000097490         0.0055138873
## Other lab:1000097905         0.0000000000
## Other lab:1000100487         0.0000000000
## Other lab:1000105807         0.0138136825
## Other lab:1000110086         0.0000000000
## Other lab:1000113359         0.0000000000
## Other lab:1000113370         0.0000000000
## Other lab:1000113374         0.0000000000
## Other lab:1000123632         0.0000000000
## Other lab:1000123683         0.0000000000
## Other lab:1000125738         0.0000000000
## Other lab:1000127464         0.0000000000
## Other lab:1000130132         0.0000000000
## Other lab:1000138393         0.0000000000
## Other lab:1200001045         0.0000000000
## Other lab:1200003709         0.0000000000
## Other lab:1200005063         0.0000000000
## Other lab:1200009278         0.0000000000
## Other lab:1200009804         0.0000000000
## Other lab:1200012810         0.0000000000
## Other lab:1200017939         0.0000000000
## Other lab:1200019634         0.0005414231
## Other lab:1200020374         0.0000000000
## Other lab:1200020589         0.0000000000
## Other lab:1200026959         0.0000000000
## Other lab:1200027224         0.0000000000
## Other lab:1200030359         0.0000000000
## Other lab:1200037040         0.0000000000
## Other lab:1200041052         0.0000000000
## Other lab:1200043285         0.0000000000
## Other lab:1200049397         0.0000000000
## Other lab:1200056521         0.0000000000
## Other lab:1200062404         0.0000000000
## Other lab:1200063830         0.0000000000
## Other lab:1200067462         0.0000000000
## Other lab:1200071543         0.0000000000
## Other lab:1200074538         0.0000000000
## Other lab:1200077607         0.0000000000
## Other lab:1200092797         0.0000000000
## Other lab:1200097367         0.0000000000
## Other lab:1200098095         0.0000000000
## Other lab:1200098375         0.0000000000
## Other lab:1200100409         0.0000000000
## Other lab:1200108410         0.0000000000
## Other lab:1200109766         0.0000000000
## Other lab:1200109768         0.0000000000
## Other lab:1200111243         0.0020224731
## Other lab:1200111254         0.0029502702
## Other lab:1200111256         0.0000000000
## Other lab:1200115145         0.0000000000
## Other lab:1200118041         0.0000000000
## Other lab:1200118042         0.0000000000
## Other lab:1200118043         0.0000000000
## Other lab:1200118044         0.0000000000
## Other lab:1200119549         0.0000000000
## Other lab:1200122176         0.0000000000
## Other lab:1200123413         0.0000000000
## Other lab:1200124637         0.0000000000
## Other lab:1200128620         0.0000000000
## Other lab:1200131781         0.0000000000
## Other lab:1200132179         0.0000000000
## Other lab:1200132244         0.0109642475
## Other lab:1200132245         0.0000000000
## Other lab:1200136134         0.0000000000
## Other lab:1200136135         0.0000000000
## Other lab:1200136136         0.0000000000
## Other lab:1200138535         0.0000000000
## Other lab:1200138536         0.0000000000
## Other lab:1200138537         0.0000000000
## Other lab:1200138538         0.0000000000
## Other lab:1200138539         0.0000000000
## Other lab:1200138540         0.0000000000
## Other lab:1200138541         0.0000000000
## Other lab:1200138542         0.0000000000
## Other lab:1200138543         0.0000000000
## Other lab:1200138544         0.0000000000
## Other lab:1200138545         0.0000000000
## Other lab:1200138546         0.0000000000
## Other lab:1200138547         0.0000000000
## Other lab:1200138548         0.0000000000
## Other lab:1200138549         0.0000000000
## Other lab:1200138550         0.0000000000
## Other lab:1200138551         0.0000000000
## Other lab:1200138552         0.0000000000
## Other lab:1200138553         0.0000000000
## Other lab:1200138555         0.0000000000
## Other lab:1200138556         0.0000000000
## Other lab:1200138557         0.0000000000
## Other lab:1200138558         0.0000000000
## Other lab:1200138559         0.0000000000
## Other lab:1200138560         0.0000000000
## Other lab:1200138561         0.0000000000
## Other lab:1200138562         0.0000000000
## Other lab:1200138563         0.0000000000
## Other lab:1200138564         0.0000000000
## Other lab:1200138565         0.0000000000
## Other lab:1200138566         0.0000000000
## Other lab:1200138567         0.0000000000
## Other lab:1200138568         0.0000000000
## Other lab:1200138569         0.0000000000
## Other lab:1200138570         0.0000000000
## Other lab:1200138665         0.0000000000
## Other lab:1200138666         0.0000000000
## Other lab:1200139018         0.0000000000
## Other lab:1200139019         0.0000000000
## Other lab:1200139020         0.0000000000
## Other lab:1200139037         0.0000000000
## Other lab:1200139038         0.0000000000
## Other lab:1200139039         0.0000000000
## Other lab:1200139040         0.0000000000
## Other lab:1200139041         0.0000000000
## Other lab:1200139583         0.0000000000
## Other lab:1200139584         0.0000000000
## Other lab:1200139673         0.0000000000
## Other lab:1200140509         0.0000000000
## Other lab:1200140510         0.0000000000
## Other lab:1200140511         0.0000000000
## Other lab:1200140512         0.0000000000
## Other lab:1200140513         0.0000000000
## Other lab:1200140514         0.0000000000
## Other lab:1200140515         0.0000000000
## Other lab:1200140517         0.0000000000
## Other lab:1200140518         0.0000000000
## Other lab:1200141194         0.0000000000
## Other lab:1400002921         0.0000000000
## Other lab:1400019640         0.0000000000
## Other lab:1400034601         0.0000000000
## Other lab:1400036647         0.0000000000
## Other lab:1400037633         0.0006591312
## Other lab:1400043521         0.0000000000
## Other lab:1400055391         0.0000000000
## Other lab:1400057084         0.0000000000
## Other lab:1400057639         0.0000000000
## Other lab:1400064377         0.0000000000
## Other lab:1400067813         0.0000000000
## Other lab:1400069118         0.0000000000
## Other lab:1400071829         0.0000000000
## Other lab:1400078944         0.0000000000
## Other lab:1400564654         0.0000000000
## Other lab:1400570592         0.0000000000
## Other lab:1400575908         0.0000000000
## Other lab:1400575945         0.0000000000
## Other lab:1400581237         0.0000000000
## Other lab:1400588543         0.0000000000
## Other lab:1400589589         0.0000000000
## Other lab:1400589590         0.0000000000
## Other lab:1400590353         0.0000000000
## Other lab:1400591060         0.0000000000
## Other lab:1400591078         0.0000000000
## Other lab:800010466          0.0000000000
## Other lab:800010497          0.0000000000
## Other lab:800010898          0.0000000000
## Other lab:800017435          0.0000000000
## Other lab:800023376          0.0000000000
## Other lab:800044440          0.0000000000
## Other lab:800048990          0.0000000000
## Other lab:800051837          0.0000000000
## Other lab:800058968          0.0000000000
## Other lab:800080170          0.0000000000
## Other lab:800086436          0.0000000000
## Other lab:800221984          0.0000000000
## Other lab:800224219          0.0000000000
## Other lab:800224995          0.0000000000
## Other lab:800230878          0.0009121255
## Other lab:800250413          0.0000000000
## PheCode:070.3                0.0000000000
## PheCode:1004                 0.0000000000
## PheCode:1009                 0.0000000000
## PheCode:1010.1               0.0000000000
## PheCode:1010.5               0.0000000000
## PheCode:1010.6               0.0012854344
## PheCode:1010.7               0.0000000000
## PheCode:1015                 0.0000000000
## PheCode:180.3                0.0000000000
## PheCode:218.1                0.0000000000
## PheCode:218.2                0.0000000000
## PheCode:221                  0.0000000000
## PheCode:256.4                0.0000000000
## PheCode:257.1                0.0000000000
## PheCode:261.4                0.0000000000
## PheCode:272.1                0.0000000000
## PheCode:278.1                0.0098956117
## PheCode:290.3                0.0000000000
## PheCode:291.1                0.0000000000
## PheCode:292.2                0.0000000000
## PheCode:292.3                0.0000000000
## PheCode:292.6                0.0000000000
## PheCode:295.1                0.0000000000
## PheCode:295.2                0.0125595414
## PheCode:295.3                0.0000000000
## PheCode:296.1                0.0382031276
## PheCode:297.1                0.0334067383
## PheCode:297.2                0.0209575094
## PheCode:300.1                0.1297343267
## PheCode:300.3                0.0245192843
## PheCode:300.4                0.0235954795
## PheCode:300.8                0.0000000000
## PheCode:300.9                0.1110219935
## PheCode:301.1                0.0120841875
## PheCode:301.2                0.0521154235
## PheCode:302.1                0.0000000000
## PheCode:303.1                0.0000000000
## PheCode:303.3                0.0000000000
## PheCode:303.4                0.0000000000
## PheCode:304                  0.0266884228
## PheCode:305.2                0.0115666069
## PheCode:306.9                0.0000000000
## PheCode:312.3                0.0009330566
## PheCode:313.1                0.0429660073
## PheCode:313.2                0.0000000000
## PheCode:313.3                0.0000000000
## PheCode:315.1                0.0000000000
## PheCode:317.1                0.0064970071
## PheCode:318                  0.0148541008
## PheCode:327.1                0.0000000000
## PheCode:327.3                0.0000000000
## PheCode:327.4                0.0212392209
## PheCode:327.5                0.0000000000
## PheCode:327.6                0.0000000000
## PheCode:327.7                0.0000000000
## PheCode:338.2                0.0000000000
## PheCode:339                  0.0289419200
## PheCode:340.1                0.0000000000
## PheCode:347                  0.0001197986
## PheCode:351                  0.0000000000
## PheCode:355.1                0.0105022721
## PheCode:367.1                0.0000000000
## PheCode:367.4                0.0000000000
## PheCode:389.4                0.0000000000
## PheCode:401.1                0.0000000000
## PheCode:476                  0.0000000000
## PheCode:521.1                0.0066237583
## PheCode:522.1                0.0000000000
## PheCode:523.3                0.0000000000
## PheCode:525.1                0.0000000000
## PheCode:526.4                0.0000000000
## PheCode:530.1                0.0000000000
## PheCode:564.1                0.0000000000
## PheCode:605                  0.0064746473
## PheCode:610.1                0.0000000000
## PheCode:612.1                0.0000000000
## PheCode:614.5                0.0000000000
## PheCode:615                  0.0000000000
## PheCode:620.1                0.0000000000
## PheCode:625.1                0.0000000000
## PheCode:626.1                0.0078069142
## PheCode:626.2                0.0000000000
## PheCode:626.4                0.0000000000
## PheCode:626.8                0.0000000000
## PheCode:627.2                0.0000000000
## PheCode:627.5                0.0000000000
## PheCode:634.3                0.0000000000
## PheCode:638                  0.0000000000
## PheCode:704.2                0.0000000000
## PheCode:706.1                0.0000000000
## PheCode:721.1                0.0000000000
## PheCode:722.1                0.0000000000
## PheCode:722.6                0.0000000000
## PheCode:726.1                0.0000000000
## PheCode:728.7                0.0000000000
## PheCode:729.1                0.0070821983
## PheCode:740.1                0.0000000000
## PheCode:745                  0.0260483136
## PheCode:760                  0.0293935200
## PheCode:761                  0.0000000000
## PheCode:763                  0.0000000000
## PheCode:765                  0.0000000000
## PheCode:769                  0.0000000000
## PheCode:770                  0.0000000000
## PheCode:773                  0.0000000000
## PheCode:792.1                0.0000000000
## PheCode:817                  0.0000000000
## PheCode:819                  0.0000000000
## PheCode:969                  0.0000000000
## PheCode:979                  0.0000000000
## PheCode:981                  0.0000000000
## RXNORM:1000104               0.0000000000
## RXNORM:10379                 0.0157053596
## RXNORM:1040028               0.0000000000
## RXNORM:10454                 0.0000000000
## RXNORM:10689                 0.0000000000
## RXNORM:10734                 0.0055256904
## RXNORM:10737                 0.0000000000
## RXNORM:10814                 0.0000000000
## RXNORM:10834                 0.0084418140
## RXNORM:1086769               0.0018330226
## RXNORM:135775                0.0000000000
## RXNORM:136411                0.0000000000
## RXNORM:141366                0.0000000000
## RXNORM:1455099               0.0048616187
## RXNORM:1547099               0.0000000000
## RXNORM:1551467               0.0000000000
## RXNORM:1592257               0.0023054088
## RXNORM:1819                  0.0000000000
## RXNORM:1827                  0.0000000000
## RXNORM:20610                 0.0000000000
## RXNORM:214130                0.0018324273
## RXNORM:214551                0.0000000000
## RXNORM:214558                0.0000000000
## RXNORM:214559                0.0000000000
## RXNORM:21949                 0.0064296087
## RXNORM:228783                0.0005447793
## RXNORM:231049                0.0000000000
## RXNORM:235355                0.0000000000
## RXNORM:24605                 0.0000000000
## RXNORM:253146                0.0041161186
## RXNORM:2596                  0.0000000000
## RXNORM:2598                  0.0000000000
## RXNORM:279645                0.0000000000
## RXNORM:28439                 0.0000000000
## RXNORM:321988                0.0000000000
## RXNORM:324044                0.0000000000
## RXNORM:3288                  0.0164538945
## RXNORM:3361                  0.0000000000
## RXNORM:352364                0.0000000000
## RXNORM:352376                0.0000000000
## RXNORM:352377                0.0000000000
## RXNORM:3554                  0.0130455291
## RXNORM:35617                 0.0008793320
## RXNORM:3638                  0.0000000000
## RXNORM:37075                 0.0000000000
## RXNORM:37418                 0.0128363130
## RXNORM:38400                 0.0000000000
## RXNORM:38404                 0.0000000000
## RXNORM:384410                0.0000000000
## RXNORM:39786                 0.0000000000
## RXNORM:39993                 0.0000000000
## RXNORM:4083                  0.0000000000
## RXNORM:41493                 0.0000000000
## RXNORM:42347                 0.0001670125
## RXNORM:4493                  0.0000000000
## RXNORM:461016                0.0032124964
## RXNORM:466584                0.0000000000
## RXNORM:51272                 0.0000000000
## RXNORM:5553                  0.0000000000
## RXNORM:5640                  0.0227074435
## RXNORM:569                   0.0000000000
## RXNORM:588003                0.0000000000
## RXNORM:588250                0.0000000000
## RXNORM:6373                  0.0000000000
## RXNORM:6711                  0.0000000000
## RXNORM:6845                  0.0000000000
## RXNORM:6901                  0.0000000000
## RXNORM:700810                0.0000000000
## RXNORM:7242                  0.0000000000
## RXNORM:7243                  0.0162912281
## RXNORM:7258                  0.0000000000
## RXNORM:72625                 0.0000000000
## RXNORM:734064                0.0000000000
## RXNORM:7407                  0.0000000000
## RXNORM:7514                  0.0000000000
## RXNORM:82819                 0.0071246172
## RXNORM:840781                0.0000000000
## RXNORM:8629                  0.0265703044
## RXNORM:88014                 0.0000000000
## RXNORM:89013                 0.0000000000
## RXNORM:9899                  0.0068314982
## ShortName:A1C                0.0000000000
## ShortName:HCV - RNA VL       0.0000000000
## ShortName:HDLC               0.0000000000
## ShortName:LDLC               0.0000000000
## ShortName:TotChol            0.0000000000
## ShortName:Trig               0.0000000000</code></pre>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
